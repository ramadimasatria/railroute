(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{145:function(n,e,t){},146:function(n,e,t){"use strict";t.r(e);var a,r,i,o=t(0),u=t.n(o),l=t(31),s=t.n(l),c=t(21),E=t(20),d=t(51),g=t(52),f=t(14),m=t(15),C=t(154),T=Object(C.a)("app/SEARCH_START"),p=Object(C.a)("app/SEARCH_DONE"),S=Object(C.a)("app/PUSH_RESULTS"),h=(a={},Object(f.a)(a,"app/SEARCH_START",function(n,e){return Object(m.a)({},n,{isLoading:!0,origin:e.origin,destination:e.destination})}),Object(f.a)(a,"app/SEARCH_DONE",function(n){return Object(m.a)({},n,{isLoading:!1})}),Object(f.a)(a,"app/PUSH_RESULTS",function(n,e){return Object(m.a)({},n,{results:e.results})}),a),b={isLoading:!1,results:[]},v=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;return h[e.type]?h[e.type](n,e.payload):n},W={},N={allStations:[],stationNames:[],stationsByName:{}},P=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;return W[e.type]?W[e.type](n,e.payload):n},y=t(34),O=Object(C.a)("line/ADD_VISITED_LINE"),B=Object(C.a)("line/CLEAR_VISITED_LINES"),D=(r={},Object(f.a)(r,"line/ADD_VISITED_LINE",function(n,e){return Object(m.a)({},n,{visitedLines:n.visitedLines.includes(e)?n.visitedLines:[].concat(Object(y.a)(n.visitedLines),[e])})}),Object(f.a)(r,"line/CLEAR_VISITED_LINES",function(n){return Object(m.a)({},n,{visitedLines:[]})}),r),j={lineNames:[],stationsByLine:{},transitsInLine:{},visitedLines:[]},L=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,e=arguments.length>1?arguments[1]:void 0;return D[e.type]?D[e.type](n,e.payload):n},k=Object(C.a)("route/CLEAR_ROUTES"),R=Object(C.a)("route/PUSH_ROUTE"),w=Object(C.a)("route/PUSH_ROUTE_ID"),J=(i={},Object(f.a)(i,"route/CLEAR_ROUTES",function(){return{allRoutes:{},lastRouteIds:[]}}),Object(f.a)(i,"route/PUSH_ROUTE",function(n,e){return Object(m.a)({},n,{allRoutes:Object(m.a)({},n.allRoutes,Object(f.a)({},e.route.id,e.route))})}),Object(f.a)(i,"route/PUSH_ROUTE_ID",function(n,e){return Object(m.a)({},n,{lastRouteIds:[].concat(Object(y.a)(n.lastRouteIds),[e])})}),i),H={allRoutes:{},lastRouteIds:[]},I=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;return J[e.type]?J[e.type](n,e.payload):n},K=Object(E.combineReducers)({app:v,station:P,line:L,route:I}),x=function(n,e){return e.reduce(function(e,t){var a=t[n];return e[a]?e[a].push(t.id):e[a]=[t.id],e},{})},_=function(n,e){var t=n.map(function(n){return e[n]});return t.sort(function(n,e){return n.number-e.number}),t.map(function(n){return n.id})},A=function(n,e){return n.map(function(n){return e[n]}).filter(function(n){return n.transit})},M=function(n){var e=function(n){var e=[],t=function(t){var a=Object.keys(n[t]).length>1,r=function(r){var i=n[t][r];("object"===typeof i?i:[i]).forEach(function(n){e.push({id:e.length,name:t,line:r,number:n,transit:a})})};for(var i in n[t])r(i)};for(var a in n)t(a);return e}(n),t=Object.keys(n),a=x("name",e),r=[],i={},o=x("line",e);for(var u in o){r.push(u),o[u]=_(o[u],e);var l=A(o[u],e);i[u]=l.map(function(n){return{station:n.id,nextLines:e.filter(function(e){return e.name===n.name&&e.line!==n.line}).map(function(n){return n.id})}})}return{app:{isLoading:!1,results:[]},station:{allStations:e,stationNames:t,stationsByName:a},line:{lineNames:r,stationsByLine:o,transitsInLine:i,visitedLines:[]},route:{allRoutes:{},lastRouteIds:[]}}}(t(53)),U=Object(E.createStore)(K,M,Object(g.composeWithDevTools)(Object(E.applyMiddleware)(d.a))),G=t(26),F=t(57);var V=function(n,e){return n.allStations[e]},Y=function(n,e){return n.allStations.filter(function(n){return n.name===e})},Q=function(n,e,t){if(e.line!==t.line)return 0;var a=n.stationsByLine[e.line],r=a.findIndex(function(n){return n===e.id}),i=a.findIndex(function(n){return n===t.id});return Math.abs(r-i)},X=function(){return function(n,e){var t=e();(function(n,e){var t=function(n,e){var t=[];return n.forEach(function(n){e.forEach(function(e){t.push([n,e])})}),t}(n,e).map(function(n){var e=Object(F.a)(n,2);return{from:e[0],to:e[1]}}),a=t.find(function(n){return n.from.line===n.to.line});return a?[a]:t})(Y(t.station,t.app.origin),Y(t.station,t.app.destination)).forEach(function(e,t){n($(e,String(t)))})}},$=function n(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(r,i){var o=i(),u=e.from,l=e.to;a>3||(u.line!==l.line?function(n,e,t){var a=function(n,e){return n.transitsInLine[e]}(n.line,e),r=n.line.visitedLines,i=a.map(function(e){var a=e.nextLines.filter(function(e){return V(n.station,e).line===t});return Object(m.a)({},e,{nextLines:a})}).filter(function(n){return n.nextLines.length>0});return i.length?i:a.map(function(e){var t=e.nextLines.filter(function(e){var t=V(n.station,e);return!r.includes(t.line)});return Object(m.a)({},e,{nextLines:t})}).filter(function(n){return n.nextLines.length>0})}(o,u.line,l.line).forEach(function(e,i){var s=t+i;r(q(u,e.station,s)),e.nextLines.forEach(function(t,i){var u=V(o.station,t);r(O(u.line)),r(q(e.station,u,s+i)),r(n({from:u,to:l},s+i,a+1))})}):r(q(u,l,t+"0",!0)))}},q=function(n,e,t){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(r,i){var o=i(),u="number"===typeof n?V(o.station,n):n,l="number"===typeof e?V(o.station,e):e,s=u.line!==l.line,c={id:t,from:u,to:l,changeLine:s,distance:Q(o.line,u,l)};r(R({route:c})),a&&r(w(t))}},z=function(){return function(n,e){var t=e(),a=t.route.lastRouteIds.map(function(n){for(var e=[],a=1;a<=n.length;a++)e.push(n.substring(0,a));var r=e.map(function(n){return t.route.allRoutes[n]}).filter(function(n){return!!n}),i=0,o=0;return r.forEach(function(n){i+=n.distance,o+=n.changeLine?1:0}),{numberOfStations:i,numberOfTransits:o,routes:r}});n(S({results:a}))}},Z=function(){return function(n){n(k()),n(B())}},nn=t(54),en=t(55),tn=t(58),an=t(56),rn=t(32),on=t(59),un=t(38),ln=t(153),sn=t(157),cn=function(n){function e(n){var t;return Object(nn.a)(this,e),(t=Object(tn.a)(this,Object(an.a)(e).call(this,n))).state={origin:"",destination:""},t.submitHandler=t.submitHandler.bind(Object(rn.a)(t)),t}return Object(on.a)(e,n),Object(en.a)(e,[{key:"submitHandler",value:function(n){if(n.preventDefault(),this.props.onSubmit){var e=this.state,t=e.origin,a=e.destination;this.props.onSubmit(t,a)}}},{key:"render",value:function(){var n=this,e=this.props,t=this.state,a=e.disabled||!t.origin||!t.destination;return o.createElement(un.a,{marginBottom:24,paddingY:24,borderBottom:!0},o.createElement("form",{onSubmit:this.submitHandler},o.createElement(un.a,{display:"flex",className:"container"},o.createElement(un.a,{display:"flex",flex:1,paddingRight:12},o.createElement(ln.a,{label:"Origin station:",width:"100%",name:"origin",marginBottom:0,onChange:function(e){return n.setState({origin:e.target.value})},value:t.origin},o.createElement("option",{disabled:!0,value:""},"Select station"),e.stations.map(function(n){return o.createElement("option",{value:n,key:n},n)}))),o.createElement(un.a,{display:"flex",flex:1,paddingRight:12},o.createElement(ln.a,{label:"Destination station:",width:"100%",name:"destination",marginBottom:0,onChange:function(e){return n.setState({destination:e.target.value})},value:t.destination},o.createElement("option",{disabled:!0,value:""},"Select station"),e.stations.map(function(n){return o.createElement("option",{value:n,key:n},n)}))),o.createElement(un.a,{display:"flex",flex:1,paddingTop:24,className:"SearchForm-field"},o.createElement(sn.a,{type:"submit",appearance:"primary",intent:"success",disabled:a},"Search Routes")))))}}]),e}(o.Component),En=Object(c.b)(function(n){return{stations:n.station.stationNames,disabled:n.app.isLoading}},function(n){return{onSubmit:function(e,t){n(function(n,e){return function(t){t(T({origin:n,destination:e})),setTimeout(function(){t(X()),t(z()),t(p()),t(Z())},0)}}(e,t))}}})(cn),dn=t(152),gn=t(151),fn=t(156),mn=function(n){var e=n.station,t={NS:"neutral",EW:"green",JS:"blue",SE:"red",BP:"orange",CC:"purple",CE:"yellow",DT:"teal",TE:"neutral",NE:"green",JE:"blue",CG:"red",SW:"orange",PE:"purple",JW:"yellow",PW:"teal"}[e.line];return o.createElement(fn.a,{color:t},o.createElement("strong",null,e.line,e.number," ",e.name))},Cn=function(n){var e=n.route,t=e.changeLine,a=e.from,r=e.to,i=t?"yellowTint":"blueTint";return o.createElement(un.a,{width:"100%",marginY:6,padding:12,background:i},t?o.createElement(G.a,null,"Change to ",o.createElement("strong",null,r.line)," line"):o.createElement(G.a,null,"Take ",o.createElement("strong",null,a.line)," line from ",o.createElement(mn,{station:a})," to ",o.createElement(mn,{station:r})))},Tn=function(n){var e=n.result;return o.createElement(gn.a,{width:"100%",border:!0,elevation:0,marginTop:12,padding:16},o.createElement(G.a,null,"Number of stations: ",e.numberOfStations,", Number of transits: ",e.numberOfTransits),e.routes.map(function(n){return o.createElement(Cn,{route:n,key:n.id})}))},pn=function(n){var e=n.results;return o.createElement(un.a,{marginBottom:36},o.createElement(dn.a,null,"Found ",e.length," results"),e.map(function(n,e){return o.createElement(Tn,{result:n,key:e})}))},Sn=function(n){return n.results.slice().sort(function(n,e){return n.numberOfStations+5*n.numberOfTransits-(e.numberOfStations+5*e.numberOfTransits)})},hn=Object(c.b)(function(n){return{results:Sn(n.app)}})(pn),bn=Object(c.b)(function(n){return{isLoading:n.app.isLoading,results:n.app.results}})(function(n){return u.a.createElement("div",{className:"app"},u.a.createElement(En,null),u.a.createElement("div",{className:"container"},n.isLoading&&u.a.createElement(G.a,null,"Finding results..."),n.results.length>0&&!n.isLoading&&u.a.createElement(hn,null)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(145);s.a.render(u.a.createElement(c.a,{store:U},u.a.createElement(bn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})},53:function(n){n.exports={Admiralty:{NS:10},Aljunied:{EW:9},"Ang Mo Kio":{NS:16},"Bahar Junction":{JS:7},Bakau:{SE:3},Bangkit:{BP:9},Bartley:{CC:12,CE:12},Bayfront:{CE:3,DT:16},Bayshore:{TE:29},"Beauty World":{DT:5},Bedok:{EW:5},"Bedok North":{DT:29},"Bedok Reservoir":{DT:30},"Bedok South":{TE:30},Bencoolen:{DT:21},Bendemeer:{DT:23},Bishan:{NS:17,CC:15,CE:15},"Boon Keng":{NE:9},"Boon Lay":{EW:27,JS:8},"Botanic Gardens":{CC:19,CE:19,DT:9},Braddell:{NS:18},"Bras Basah":{CC:2},"Bright Hill":{TE:7},Buangkok:{NE:15},Bugis:{EW:12,DT:14},"Bukit Batok":{NS:2},"Bukit Batok West":{JE:3},"Bukit Gombak":{NS:3},"Bukit Panjang":{BP:[6,14],DT:1},"Buona Vista":{EW:21,CC:22,CE:22},Caldecott:{CC:17,CE:17,TE:9},Canberra:{NS:12},Cantonment:{CC:31,CE:31},Cashew:{DT:2},"Changi Airport":{CG:2},"Cheng Lim":{SW:1},Chinatown:{NE:4,DT:19},"Chinese Garden":{EW:25},"Choa Chu Kang":{NS:4,JS:1,BP:[1,19]},"Choa Chu Kang West":{JS:2},"City Hall":{NS:25,EW:13},"Clarke Quay":{NE:5},Clementi:{EW:23},Commonwealth:{EW:20},Compassvale:{SE:1},"Coral Edge":{PE:3},Corporation:{JS:5},Cove:{PE:1},Dakota:{CC:8,CE:8},Damai:{PE:7},"Dhoby Ghaut":{NS:24,NE:6,CC:1},Dover:{EW:22},Downtown:{DT:17},Enterprise:{JS:9},Esplanade:{CC:3},Eunos:{EW:7},Expo:{CG:1,DT:35},Fajar:{BP:10},Farmway:{SW:2},"Farrer Park":{NE:8},"Farrer Road":{CC:20,CE:20},Fernvale:{SW:5},"Fort Canning":{DT:20},"Gardens by the Bay":{TE:22},"Gek Poh":{JW:1},"Geylang Bahru":{DT:24},"Great World":{TE:15},"Gul Circle":{EW:30},HarbourFront:{NE:1,CC:29,CE:29},Havelock:{TE:16},"Haw Par Villa":{CC:25,CE:25},Hillview:{DT:3},"Holland Village":{CC:21,CE:21},"Hong Kah":{JS:4},Hougang:{NE:14},"Jalan Besar":{DT:22},Jelapang:{BP:12},"Joo Koon":{EW:29},"Jurong East":{NS:1,EW:24,JE:5},"Jurong Hill":{JS:11},"Jurong Pier":{JS:12},"Jurong Town Hall":{JE:6},"Jurong West":{JS:6},Kadaloor:{PE:5},"Kaki Bukit":{DT:28},Kallang:{EW:10},Kangkar:{SE:4},"Katong Park":{TE:24},"Keat Hong":{BP:[3,17]},Kembangan:{EW:6},"Kent Ridge":{CC:24,CE:24},Keppel:{CC:30,CE:30},Khatib:{NS:14},"King Albert Park":{DT:6},Kovan:{NE:13},Kranji:{NS:7},Kupang:{SW:3},"Labrador Park":{CC:27,CE:27},Lakeside:{EW:26},Lavender:{EW:11},Layar:{SW:6},Lentor:{TE:5},"Little India":{NE:7,DT:12},"Lorong Chuan":{CC:14,CE:14},MacPherson:{CC:10,CE:10,DT:26},"Marina Bay":{CE:[2,33],NS:27,TE:20,CC:33},"Marina South":{TE:21},"Marina South Pier":{NS:28},"Marine Parade":{TE:26},"Marine Terrace":{TE:27},Marsiling:{NS:8},Marymount:{CC:16,CE:16},Mattar:{DT:25},Maxwell:{TE:18},Mayflower:{TE:6},Meridian:{PE:2},"Mount Pleasant":{TE:10},Mountbatten:{CC:7,CE:7},"Nanyang Crescent":{JW:4},"Nanyang Gateway":{JW:3},Napier:{TE:12},Newton:{NS:21,DT:11},Nibong:{PW:5},"Nicoll Highway":{CC:5,CE:5},Novena:{NS:20},Oasis:{PE:6},"one-north":{CC:23,CE:23},Orchard:{NS:22,TE:14},"Orchard Boulevard":{TE:13},"Outram Park":{EW:16,NE:3,TE:17},"Pandan Reservoir":{JE:7},"Pasir Panjang":{CC:26,CE:26},"Pasir Ris":{EW:1},"Paya Lebar":{EW:8,CC:9,CE:9},Pending:{BP:8},"Peng Kang Hill":{JW:5},Petir:{BP:7},Phoenix:{BP:[5,15]},Pioneer:{EW:28},"Potong Pasir":{NE:10},"Prince Edward Road":{CC:32,CE:32},Promenade:{CC:4,CE:4,DT:15},Punggol:{NE:17,PE:[0,8],PW:[0,8]},"Punggol Coast":{NE:18},"Punggol Point":{PW:3},Queenstown:{EW:19},"Raffles Place":{NS:26,EW:14},Ranggung:{SE:5},Redhill:{EW:18},Renjong:{SW:8},Riviera:{PE:4},Rochor:{DT:13},Rumbia:{SE:2},"Sam Kee":{PW:1},Samudera:{PW:4},Segar:{BP:11},Sembawang:{NS:11},Sengkang:{NE:16,SE:[0,6],SW:[0,9]},Senja:{BP:13},Serangoon:{NE:12,CC:13,CE:13},"Shenton Way":{TE:19},Siglap:{TE:28},Simei:{EW:3},"Sixth Avenue":{DT:7},Somerset:{NS:23},"Soo Teck":{PW:7},"South View":{BP:[2,18]},Springleaf:{TE:4},Stadium:{CC:6,CE:6},Stevens:{DT:10,TE:11},Sumang:{PW:6},"Sungei Bedok":{DT:37,TE:31},"Tai Seng":{CC:11,CE:11},Tampines:{EW:2,DT:32},"Tampines East":{DT:33},"Tampines West":{DT:31},"Tan Kah Kee":{DT:8},"Tanah Merah":{EW:4,CG:0},"Tanjong Katong":{TE:25},"Tanjong Pagar":{EW:15},"Tanjong Rhu":{TE:23},Tawas:{JW:2},"Teck Lee":{PW:2},"Teck Whye":{BP:[4,16]},"Telok Ayer":{DT:18},"Telok Blangah":{CC:28,CE:28},Tengah:{JS:3},"Tengah Park":{JE:2},"Tengah Plantation":{JE:1},Thanggam:{SW:4},"Tiong Bahru":{EW:17},"Toa Payoh":{NS:19},"Toh Guan":{JE:4},Tongkang:{SW:7},"Tuas Crescent":{EW:31},"Tuas Link":{EW:33},"Tuas West Road":{EW:32},Tukang:{JS:10},Ubi:{DT:27},"Upper Changi":{DT:34},"Upper Thomson":{TE:8},Woodlands:{NS:9,TE:2},"Woodlands North":{TE:1},"Woodlands South":{TE:3},Woodleigh:{NE:11},Xilin:{DT:36},"Yew Tee":{NS:5},"Yio Chu Kang":{NS:15},Yishun:{NS:13}}},64:function(n,e,t){n.exports=t(146)}},[[64,1,2]]]);
//# sourceMappingURL=main.41c0da54.chunk.js.map